{% load static %}
<aside id="sidebar" class="bg-light text-dark h-100 shadow-md sidebar fixed md:relative" 
       style="width: 16rem;" >

    <nav class="mt-4 flex-grow">
    {% for item in sidebar_menu %}
        <div>
            <a href="{{ item.href }}" class="d-flex align-items-center px-4 py-2 hover:bg-light-subtle text-decoration-none"
              {% if item.children %} data-bs-toggle="collapse" data-bs-target="#menu{{ forloop.counter }}" {% endif %}>
              <span class="fs-5">{{ item.icon }}</span>
              <span class="ms-3 flex-grow {% if collapsed %}d-none{% endif %}">{{ item.label }}</span>
              {% if item.children %}
                  <span class="transform transition-transform duration-200 {% if collapsed %}d-none{% endif %}">
                    <i class="bi bi-chevron-right"></i>
                  </span>
                {% endif %}
            </a>

            {% if item.children %}
                <div id="menu{{ forloop.counter }}" class="collapse ms-4 {% if collapsed %}d-none{% endif %}">
                    {% for child in item.children %}
                        <a href="{{ child.href }}" class="d-flex align-items-center py-2 px-4 text-sm text-secondary hover:text-dark hover:bg-light-subtle text-decoration-none">
                          <span class="fs-6 me-2">{{ child.icon }}</span>
                           {{ child.label }}
                        </a>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    {% endfor %}
    </nav>

    <div class="border-top border-secondary py-4">
        {% for item in bottom_menu %}
        <a href="{{ item.href }}" class="d-flex align-items-center px-4 py-2 hover:bg-light-subtle text-decoration-none">
            <span class="fs-5">{{ item.icon }}</span>
            <span class="ms-3 {% if collapsed %}d-none{% endif %}">{{ item.label }}</span>
        </a>
        {% endfor %}
    </div>
</aside>